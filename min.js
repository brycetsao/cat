(function(){$((function(){var t;return t=function(){return $("#dock").css("bottom",0)},$("#profile").hover(t),$(document).mousemove((function(e){if(e.pageY>$(window).height()-80)return t()})),$(document).on("wheel",t)}))}).call(this),function(){var t,e,i;e={host:"https://www.instagram.com/",username:"",tag:"",container:"#instaflow",display_profile:!1,display_biography:!1,display_gallery:!0,display_igtv:!1,get_data:!1,callback:null,items:12,image_size:640,audio:null},i={150:0,240:1,320:2,480:3,640:4},t=class{constructor(t){var a,s,n;return s=$.extend({},e,t),this.audio=s.audio,this.playing=-1,""===s.username&&""===s.tag?(console.error("Instagram Feed: Error, no username or tag found."),!1):(void 0!==s.get_raw_json&&(console.warn("Instagram Feed: get_raw_json is deprecated. See use get_data instead"),s.get_data=s.get_raw_json),s.get_data||""!==s.container?s.get_data&&null===s.callback?(console.error("Instagram Feed: Error, no callback defined to get the raw json"),!1):(a=""===s.username,n=a?s.host+"explore/tags/"+s.tag:s.host+s.username,$.get(n,(function(t){var e,r,o,h,c,d,l,u;if(t=t.split("window._sharedData = ")[1].split("<\/script>")[0],t=(t=(t=JSON.parse(t.substr(0,t.length-1))).entry_data.ProfilePage||t.entry_data.TagPage)[0].graphql.user||t[0].graphql.hashtag,s.get_data&&s.callback(t),r="",c=void 0!==i[s.image_size]?i[s.image_size]:i[640],void 0!==t.is_private&&!0===t.is_private)r+="<p class='instagram_private'><strong>This profile is private</strong></p>";else{for(l=(d=(t.edge_owner_to_timeline_media||t.edge_hashtag_to_media).edges).length>s.items?s.items:d.length,r+="<div class='gallery'>",o=0;o<l;){switch(n="https://www.instagram.com/p/"+d[o].node.shortcode,h=void 0,u=void 0,e=void 0,d[o].node.__typename){case"GraphSidecar":u="sidecar";break;case"GraphVideo":u="video",h=d[o].node.thumbnail_src;break;default:u="image",h=d[o].node.thumbnail_resources[c].src}e=void 0!==d[o].node.edge_media_to_caption.edges[0]?d[o].node.edge_media_to_caption.edges[0].node.text:void 0!==d[o].node.accessibility_caption?d[o].node.accessibility_caption:(a?t.name:t.username)+" image "+o,r+=`<div class='instagram ${u}' index=${o+1} position=${Math.min(5,o+1)}>`,r+=`<img draggable='false' src='${h}'>`,r+=`<a class='description' href='${n}'>`,r+=`<p class='caption'>${e}<br>`,r+=`<span><ion-icon name='heart'/>${d[o].node.edge_liked_by.count}</span>`,r+=`<span><ion-icon name='chatbubble'/>${d[o].node.edge_media_to_comment.count}</span>`,r+="</p>",r+="</a>",r+="</div>",o++}r+="</div>"}return $(s.container).append(r)})).fail((function(t){return console.error("Instagram Feed: Unable to fetch the given user/tag. Instagram responded with the status code: ",t.status)})),!0):(console.error("Instagram Feed: Error, no container found."),!1))}prev(){if(!(this.playing<=0))return this.goto(this.playing-1)}next(){if(this.playing!==$(".instagram").length-1)return this.goto(this.playing+1)}goto(t){var e,i,a,s,n;for($(".cover").hide(),i=a=0,s=(n=$(".instagram")).length;a<s;i=++a)e=n[i],$(e).attr("position",Math.max(-5,Math.min(5,i-t)));if(this.playing=t,this.audio)return this.audio.play(`media/${$(".description")[this.playing].href.split("/").pop()}.mp3`)}},$((function(){var e,i;return i=new Visualizer("#particles"),e=new t({container:"#instaflow",username:"brycetsao",audio:i}),$(".prev").click((function(){return e.prev()})),$(".next").click((function(){return e.next()})),$("#instaflow").click(".instagram > img",(function(t){return e.goto($(t.target).parent().index())})),$(document).keyup((function(t){switch(t.which){case 37:return e.prev();case 39:return e.next()}}))}))}.call(this),function(){var t,e,i,a,s,n,r,o,h;t=2*Math.PI,a=function(){return window.innerWidth},s=function(){return window.innerHeight},h=function(t=1){return t*Math.random()},o=function(t=1){return h(-t)},r=function(e,i){return Math.sin(t*e/i)},n=Math.pow,i=class{constructor(t,e){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0}clone(){return this}add(t){return this.x+=t.x||t[0]||0,this.y+=t.y||t[1]||0,this}},e=class{constructor(t,e){this.index=t,this.parent=e,this.rad_min=2,this.init()}get_data(){return.01*this.parent.fft_data[this.index]}init(){return this.data=this.get_data(),this.rad=this.rad_min+this.data*(a()+s())*.00625,this.pos=new i(h(a()),s()+this.rad+h(s()/4)),this.vx=o(4),this.tick=o(32)}update(){return this.tick++,this.data=this.get_data(),this.rad=this.rad_min+16*this.data,this.hue=180+this.index/this.parent.analyser.frequencyBinCount*240+45*this.data,this.satur=50*this.data,this.alpha=.5*this.data,this.light=50+n(2,this.data),this.fill=`hsla(${this.hue}, ${this.satur}%, ${this.light}%, ${this.alpha})`,this.pos.add({x:this.vx+2*r(this.tick,256),y:-1*n(this.data,3)}),this.check()}check(){var t;if(this.pos.y<-this.size||!(-.1<(t=this.pos.x/a())&&t<1.1))return this.init()}},this.Visualizer=class{constructor(t){this.tick=0,this.audio=$(`${t} audio`)[0],this.main_layer=$(`${t} canvas`)[0],this.glow_layer=$(`${t} canvas`)[1],this.ctx=this.main_layer.getContext("2d"),this.gctx=this.glow_layer.getContext("2d"),this.actx=new AudioContext,this.source=this.actx.createMediaElementSource(this.audio),this.analyser=new AnalyserNode(this.actx,{minDecibels:-128,maxDecibels:0,smoothingTimeConstant:.8}),this.source.connect(this.analyser),this.source.connect(this.actx.destination),this.fft_data=new Uint8Array(this.analyser.frequencyBinCount),this.resize(),this.generate(),this.render(),$(window).resize(this.resize.bind(this))}resize(){return this.main_layer.width=this.glow_layer.width=a(),this.main_layer.height=this.glow_layer.height=s()}play(t){return this.audio.src=t,this.audio.play(),this.actx.resume()}generate(t){var i,a,s;for(this.particles=[],s=[],i=a=40;a<=800;i=++a)s.push(this.particles.push(new e(i,this)));return s}update(){var e,i,n,r,o;for(this.analyser.getByteFrequencyData(this.fft_data),this.ctx.clearRect(0,0,a(),s()),e=i=0,n=(o=this.particles).length;i<n;e=++i)r=o[e],this.fft_data[e]&&(r.update(),this.ctx.beginPath(),this.ctx.fillStyle=r.fill,this.ctx.arc(r.pos.x,r.pos.y,r.rad,0,t),this.ctx.fill(),this.ctx.closePath());return this.gctx.clearRect(0,0,a(),s()),this.gctx.drawImage(this.main_layer,0,0)}render(){return this.tick++,this.update(),requestAnimationFrame(this.render.bind(this))}}}.call(this);